<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>WLL.wtf</title>
    <meta name="description" content="A working load limit (WLL) calculator for suspension practitioners" />
    <meta property="og:site_name" content="WLL.wtf" />
    <meta property="og:url" content="https://www.wll.wtf" />
    <meta property="og:type" content="website" />
    <meta property="og:locale" content="en_US" />
    <meta property="og:title" content="WLL.wtf" />
    <meta property="og:description" content="A working load limit (WLL) calculator for suspension practitioners" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
  </head>
  <body class="py-4">
    <div class="container">
      <div class="row">
        <div class="col"></div>
        <div class="col-sm-12 col-md-8 col-lg-6">
          <h1 class="text-center">WLL.wtf</h1>
          <p class="lead text-center">A working load limit (WLL) calculator for suspension practitioners</p>

          <form class="my-4">
            <div class="row g-1 g-sm-4">
              <div class="col">
                <div class="input-group mb-3 w-100">
                  <label class="input-group-text fw-medium" for="input-fiber-class">Fiber</label>
                  <select class="form-select" id="input-fiber-class">
                    <option value="1" selected>Class 1</option>
                    <option value="2">Class 2</option>
                  </select>
                </div>
              </div>
              <!-- col -->
              <div class="col">
                <div class="input-group mb-3">
                  <div class="btn-group w-100" role="group" id="input-units" aria-label="Basic radio toggle button group">
                    <input type="radio" class="btn-check" name="btnradio" id="input-units-imperial" autocomplete="off" data-units="lbs" />
                    <label class="btn btn-outline-secondary" for="input-units-imperial">Imperial</label>

                    <input type="radio" class="btn-check" name="btnradio" id="input-units-metric" autocomplete="off" data-units="kg" />
                    <label class="btn btn-outline-secondary" for="input-units-metric">Metric</label>
                  </div>
                </div>
              </div>
              <!-- col -->
            </div>
            <!-- row -->

            <div class="input-group mb-3">
              <span class="input-group-text fw-medium">MBS</span>
              <input
                id="input-cord-mbs"
                type="text"
                class="form-control text-end"
                placeholder="Minimum Breaking Strength"
                aria-label="Minimum Breaking Strength"
                aria-describedby="input-cord-mbs"
                value=""
              />
              <span id="label-mbs" class="input-group-text fw-medium">lbs</span>
            </div>

            <div class="input-group mb-3">
              <span class="input-group-text fw-medium">Load</span>
              <input id="input-load" type="text" class="form-control text-end" placeholder="Estimated Load" aria-label="Load" aria-describedby="input-load" value="" />
              <span id="label-load" class="input-group-text fw-medium">lbs</span>
            </div>

            <div class="input-group mb-3">
              <span class="input-group-text fw-medium" for="input-safety-factor">Safety Factor</span>
              <input id="input-safety-factor" type="text" class="form-control text-end" placeholder="Safety Factor" aria-label="Safety Factor" aria-describedby="input-safety-factor" value="10" />
            </div>
          </form>

          <div class="table-responsive my-4">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="row" colspan="2">
                    Derated Minimum Breaking Strength (dMBS)
                    <a class="ps-2 text-secondary" data-bs-toggle="collapse" href="#collapseDMBS" role="button" aria-expanded="false" aria-controls="collapseExample">
                      <i class="bi bi-info-circle"></i>
                    </a>
                    <div class="collapse" id="collapseDMBS">
                      <div class="my-2 fw-normal">
                        <code>Fiber Class &times; MBS = <span class="text-body">dMBS</span></code>
                        <br />
                        <code>
                          <span id="calc-derate-decimal">0.5</span> &times; <span id="calc-mbs">0</span> = <span id="calc-derated-mbs" class="text-body">0</span>
                        </code>
                      </div>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="w-50 font-monospace"><span id="output-derated-mbs">0</span> <span id="label-derated-mbs">lbs</span></td>
                  <td id="output-derated-percent" class="w-50 font-monospace">(50%)</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="table-responsive my-4">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="row" colspan="2">
                    Working Load Limit (WLL)
                    <a class="ps-2 text-secondary" data-bs-toggle="collapse" href="#collapseWLL" role="button" aria-expanded="false" aria-controls="collapseWLL">
                      <i class="bi bi-info-circle"></i>
                    </a>
                    <div class="collapse" id="collapseWLL">
                      <div class="my-2 fw-normal">
                        <code>dMBS &divide; Safety Factor = <span class="text-body">WLL</span></code>
                        <br />
                        <code>
                          <span id="calc-wll-dmbs">0</span> &divide; <span id="calc-wll-sf">10</span> = <span id="calc-wll-result" class="text-body">0</span>
                        </code>
                        <br />
                        <code class="text-secondary">
                          <span id="calc-wll-per-line" class="text-body">0</span> &times; 2 = <span id="calc-wll-per-basket">0</span> Per Basket
                        </code>
                      </div>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Per Line</td>
                  <td class="w-50 font-monospace"><span id="output-wll-per-line">0</span> <span id="label-per-line">lbs</span></td>
                </tr>
                <tr>
                  <td>Per Basket</td>
                  <td class="w-50 font-monospace"><span id="output-wll-per-basket">0</span> <span id="label-per-basket">lbs</span></td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="table-responsive my-4">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th scope="row" colspan="2">
                    Minimum Cord Needed
                    <a class="ps-2 text-secondary" data-bs-toggle="collapse" href="#collapseCord" role="button" aria-expanded="false" aria-controls="collapseCord">
                      <i class="bi bi-info-circle"></i>
                    </a>
                    <div class="collapse" id="collapseCord">
                      <div class="my-2 fw-normal">
                        <code>Load &divide; WLL = <span class="text-body">Minimum Lines</span></code>
                        <br/>
                        <code>
                          <span id="calc-min-cord-load">0</span> &divide; <span id="calc-min-cord-wll">0</span> = <span id="calc-min-cord-lines" class="text-body">0</span>
                        </code>
                        <br />
                        <code class="text-secondary">
                          <span id="calc-min-cord-lines-input" class="text-body">0</span> &divide; 2 = <span id="calc-min-cord-baskets">0</span> Minimum Baskets
                        </code>
                      </div>
                    </div>
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Lines</td>
                  <td id="output-minimum-lines" class="w-50 font-monospace">0</td>
                </tr>
                <tr>
                  <td>Baskets</td>
                  <td id="output-minimum-baskets" class="w-50 font-monospace">0</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="my-4">
            <div class="text-center">
              <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#explanationModal">
                Explanations and Terms
              </button>
            </div>

            <div class="modal fade" id="explanationModal" tabindex="-1" aria-labelledby="explanationModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="explanationModalLabel">Explanations and Terms</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <p class="mb-4">
                      <b>Working Load Limit (WLL):</b> the maximum weight as defined by the manufacturer that a user is allowed to apply to a lifting medium in the performer flying system.
                    </p>
                    <p class="mb-4">
                      <b>Minimum Breaking Strength (MBS):</b> the maximum amount of force a material can withstand before it breaks completely under a straight pull. <span class="fw-medium fst-italic">The cord manufacturer should specify the MBS.</span>
                    </p>
                    <p class="mb-4">
                      <b>Characteristic Load:</b> the maximum force applied to the system resulting from normal intended operating conditions while the system is at rest or in motion.
                    </p>
                    <p class="mb-4">
                      <b>Safety Factor (SF):</b> the ratio between the designated working load limit (WLL) and the load the equipment is expected to fail at. <span class="fw-medium fst-italic">When selecting an appropriate cord for use with body suspension, a safety factor of 10 needs to be employed. This safety factor takes into account dynamic forces and unknown variables but not terminations.</span>
                    </p>
                    <p class="mb-4">
                      <b>Derating Cord:</b> The MBS of the cord needs to be derated by <code>50%</code> for Class 1 fibers and <code>70%</code> for Class 2 fibers to account for knots and terminations, which reduce the strength of the cord.
                    </p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="my-4">
            <p class="text-body-secondary fst-italic">
              This calculator is designed to assist you in selecting the most appropriate cord for your specific application.
              <b>Please note:</b> While overall tensile strength is important, other properties should also be considered when choosing cord for critical applications. Use this tool as a guide only.
            </p>
          </div>
        </div>
        <div class="col"></div>
      </div>
      <!-- row -->
    </div>
    <!-- container -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
    <script>
      const pounds = "lbs";
      const unitStorageKey = "wll-units";
      const fiberClass1Percent = 0.5;
      const fiberClass2Percent = 0.3;

      let units = localStorage.getItem(unitStorageKey) || pounds;
      let fiberClass = 1;
      let deratePercent = fiberClass1Percent;
      let mbs = 0.0;
      let load = 0.0;
      let safetyFactor = 10;

      document.getElementById("input-units-imperial").addEventListener("change", (event) => {
        setUnits(event.target.dataset.units);
      });

      document.getElementById("input-units-metric").addEventListener("change", (event) => {
        setUnits(event.target.dataset.units);
      });

      document.getElementById("input-fiber-class").addEventListener("input", (event) => {
        fiberClass = parseInt(event.target.value) || 1;
        deratePercent = fiberClass === 1 ? fiberClass1Percent : fiberClass2Percent;
        computeDeratedMBS();
        console.log(`Fiber Class: ${fiberClass}, Derate Percent: ${deratePercent}`);
      });

      document.getElementById("input-cord-mbs").addEventListener("input", (event) => {
        let mbs_input = parseInt(event.target.value) || 0;
        mbs = Math.max(mbs_input, 0);
        computeDeratedMBS();
        console.log(`MBS: ${mbs}`);
      });

      document.getElementById("input-load").addEventListener("input", (event) => {
        let load_input = parseInt(event.target.value) || 0;
        load = Math.max(load_input, 0);
        computeWLL();
        console.log(`Load: ${load}`);
      });

      document.getElementById("input-safety-factor").addEventListener("input", (event) => {
        let sf_input = parseInt(event.target.value) || 1;
        safetyFactor = Math.max(sf_input, 1);
        computeWLL();
        console.log(`Safety Factor: ${safetyFactor}`);
      });

      function setUnits(value) {
        console.log(`Set units: ${value}`);
        units = value;
        localStorage.setItem(unitStorageKey, value);

        let isLbs = value === pounds;
        document.getElementById("input-units-metric").checked = !isLbs;
        document.getElementById("input-units-imperial").checked = isLbs;

        document.getElementById("label-mbs").textContent = `${units}`;
        document.getElementById("label-load").textContent = `${units}`;

        document.getElementById("label-derated-mbs").textContent = `${units}`;
        document.getElementById("label-per-line").textContent = `${units}`;
        document.getElementById("label-per-basket").textContent = `${units}`;
      }

      function computeDeratedMBS() {
        const deratedMbs = parseFloat(mbs * deratePercent) || 0;
        const fiberPercent = deratePercent * 100;
        console.log(`Derated MBS: ${deratedMbs} ${fiberPercent}`);

        document.getElementById("output-derated-mbs").textContent = `${deratedMbs.toFixed(1)}`;
        document.getElementById("output-derated-percent").textContent = `(${fiberPercent}% Class ${fiberClass})`;

        // Update calculation display
        document.getElementById("calc-derate-decimal").textContent = `${deratePercent}`;
        document.getElementById("calc-mbs").textContent = `${mbs}`;
        document.getElementById("calc-derated-mbs").textContent = `${deratedMbs.toFixed(1)}`;

        computeWLL();
      }

      function computeWLL() {
        const deratedMbs = parseFloat(mbs * deratePercent) || 0;
        const wllPerLine = deratedMbs / safetyFactor;
        const wllPerBasket = wllPerLine * 2;
        console.log(`WLL Per Line: ${wllPerLine}, Per Basket: ${wllPerBasket}`);

        document.getElementById("output-wll-per-line").textContent = `${wllPerLine.toFixed(1)}`;
        document.getElementById("output-wll-per-basket").textContent = `${wllPerBasket.toFixed(1)}`;

        // Update WLL calculation display
        document.getElementById("calc-wll-dmbs").textContent = `${deratedMbs.toFixed(1)}`;
        document.getElementById("calc-wll-sf").textContent = `${safetyFactor}`;
        document.getElementById("calc-wll-result").textContent = `${wllPerLine.toFixed(1)}`;
        document.getElementById("calc-wll-per-line").textContent = `${wllPerLine.toFixed(1)}`;
        document.getElementById("calc-wll-per-basket").textContent = `${wllPerBasket.toFixed(1)}`;

        const minimumLines = parseInt(Math.max(Math.ceil(load / wllPerLine), 1)) || 0;
        const minimumBaskets = Math.ceil(minimumLines / 2);
        console.log(`Minimum Lines: ${minimumLines}, Baskets: ${minimumBaskets}`);

        document.getElementById("output-minimum-lines").textContent = `${minimumLines}`;
        document.getElementById("output-minimum-baskets").textContent = `${minimumBaskets}`;

        // Update Cord Needed calculation display
        document.getElementById("calc-min-cord-load").textContent = `${load}`;
        document.getElementById("calc-min-cord-wll").textContent = `${wllPerLine.toFixed(1)}`;
        document.getElementById("calc-min-cord-lines").textContent = `${minimumLines}`;
        document.getElementById("calc-min-cord-lines-input").textContent = `${minimumLines}`;
        document.getElementById("calc-min-cord-baskets").textContent = `${minimumBaskets}`;
      }

      const mediaQueryListColorScheme = window.matchMedia("(prefers-color-scheme: dark)");
      function handleColorSchemeChange(mql) {
        let theme = mql.matches ? "dark" : "light";
        document.querySelector("html").setAttribute("data-bs-theme", theme);
      }
      mediaQueryListColorScheme.addEventListener("change", handleColorSchemeChange);

      // Initialize on page load
      setUnits(units);
      computeDeratedMBS();
      handleColorSchemeChange(mediaQueryListColorScheme);
    </script>
  </body>
</html>
